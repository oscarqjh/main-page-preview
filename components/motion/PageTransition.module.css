/* =============================================================================
 * Cyberpunk Glitch Page Transition
 * ============================================================================= */

.transitionWrapper {
	position: relative;
	width: 100%;
}

/* --- Glitch Overlay (covers full viewport during transition) --- */
.glitchOverlay {
	position: fixed;
	inset: 0;
	z-index: 50;
	pointer-events: none;
	overflow: hidden;
	background: #000;
}

/* --- Scanlines --- */
.scanlines {
	position: absolute;
	inset: 0;
	background: repeating-linear-gradient(
		to bottom,
		transparent 0px,
		transparent 2px,
		rgba(0, 255, 65, 0.03) 2px,
		rgba(0, 255, 65, 0.03) 4px
	);
	z-index: 2;
}

/* --- Noise grain texture via pseudo-element --- */
.noise {
	position: absolute;
	inset: -50%;
	width: 200%;
	height: 200%;
	z-index: 1;
	opacity: 0.15;
	background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
	animation: noiseShift 0.1s steps(3) infinite;
}

/* --- Horizontal glitch slices --- */
.glitchSlice {
	position: absolute;
	left: 0;
	right: 0;
	height: 3px;
	z-index: 3;
}

.glitchSlice:nth-child(1) {
	top: 15%;
	background: rgba(255, 0, 0, 0.6);
	animation: sliceShift1 0.15s steps(2) infinite;
}

.glitchSlice:nth-child(2) {
	top: 35%;
	background: rgba(0, 255, 255, 0.5);
	animation: sliceShift2 0.12s steps(3) infinite;
}

.glitchSlice:nth-child(3) {
	top: 55%;
	background: rgba(255, 0, 255, 0.4);
	animation: sliceShift3 0.18s steps(2) infinite;
}

.glitchSlice:nth-child(4) {
	top: 72%;
	background: rgba(0, 255, 0, 0.5);
	animation: sliceShift1 0.1s steps(4) infinite reverse;
}

.glitchSlice:nth-child(5) {
	top: 88%;
	background: rgba(255, 255, 0, 0.3);
	animation: sliceShift2 0.14s steps(2) infinite;
}

/* --- Horizontal displacement blocks --- */
.displaceBlock {
	position: absolute;
	left: -5%;
	width: 110%;
	z-index: 4;
	background: rgba(3, 105, 161, 0.4);
	mix-blend-mode: screen;
}

.displaceBlock:nth-child(1) {
	top: 20%;
	height: 8%;
	animation: displaceH 0.08s steps(2) infinite;
}

.displaceBlock:nth-child(2) {
	top: 50%;
	height: 5%;
	animation: displaceH 0.12s steps(3) infinite reverse;
}

.displaceBlock:nth-child(3) {
	top: 75%;
	height: 12%;
	animation: displaceH 0.06s steps(2) infinite;
}

/* --- RGB channel split on page content --- */
.pageContent {
	width: 100%;
	will-change: transform;
}

.pageContent.glitching {
	animation: rgbSplit 0.15s steps(2) infinite;
}

/* =============================================================================
 * Keyframes
 * ============================================================================= */

@keyframes noiseShift {
	0% { transform: translate(0, 0); }
	33% { transform: translate(-10%, -15%); }
	66% { transform: translate(5%, 10%); }
	100% { transform: translate(-5%, 5%); }
}

@keyframes sliceShift1 {
	0% { transform: translateX(0); width: 100%; }
	50% { transform: translateX(-8vw); width: 60%; }
	100% { transform: translateX(12vw); width: 80%; }
}

@keyframes sliceShift2 {
	0% { transform: translateX(5vw); width: 90%; }
	50% { transform: translateX(-15vw); width: 40%; }
	100% { transform: translateX(3vw); width: 70%; }
}

@keyframes sliceShift3 {
	0% { transform: translateX(-3vw); width: 100%; }
	50% { transform: translateX(20vw); width: 30%; }
	100% { transform: translateX(-10vw); width: 50%; }
}

@keyframes displaceH {
	0% { transform: translateX(0) scaleY(1); }
	25% { transform: translateX(-3vw) scaleY(1.5); }
	50% { transform: translateX(5vw) scaleY(0.5); }
	75% { transform: translateX(-8vw) scaleY(2); }
	100% { transform: translateX(2vw) scaleY(1); }
}

@keyframes rgbSplit {
	0% {
		text-shadow: -2px 0 #ff0000, 2px 0 #00ffff;
		filter: none;
	}
	25% {
		text-shadow: 2px 0 #ff0000, -2px 0 #00ffff;
		filter: hue-rotate(10deg);
	}
	50% {
		text-shadow: -1px 1px #ff0000, 1px -1px #00ffff;
		filter: saturate(1.5);
	}
	75% {
		text-shadow: 3px 0 #ff0000, -3px 0 #00ffff;
		filter: hue-rotate(-5deg);
	}
	100% {
		text-shadow: 0 0 #ff0000, 0 0 #00ffff;
		filter: none;
	}
}
